<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd">
<mapper namespace="com.sstc.hmis.permission.dbaccess.dao.PermsTPermissionMapper">
  <resultMap id="BaseResultMap" type="com.sstc.hmis.permission.dbaccess.data.PermsTPermission">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    <id column="cl_id" jdbcType="VARCHAR" property="clId" />
    <result column="cl_name" jdbcType="VARCHAR" property="clName" />
    <result column="cl_type" jdbcType="SMALLINT" property="clType" />
    <result column="cl_status" jdbcType="SMALLINT" property="clStatus" />
    <result column="cl_blockup" jdbcType="SMALLINT" property="clBlockup" />
    <result column="cl_url" jdbcType="VARCHAR" property="clUrl" />
    <result column="cl_is_base" jdbcType="SMALLINT" property="clIsBase" />
    <result column="cl_has_others" jdbcType="SMALLINT" property="clHasOthers" />
    <result column="cl_pid" jdbcType="VARCHAR" property="clPid" />
    <result column="cl_price" jdbcType="NUMERIC" property="clPrice" />
    <result column="cl_grp_id" jdbcType="VARCHAR" property="clGrpId" />
    <result column="cl_hotel_id" jdbcType="VARCHAR" property="clHotelId" />
    <result column="cl_create_time" jdbcType="TIMESTAMP" property="clCreateTime" />
    <result column="cl_create_by" jdbcType="VARCHAR" property="clCreateBy" />
    <result column="cl_modify_time" jdbcType="TIMESTAMP" property="clModifyTime" />
    <result column="cl_modify_by" jdbcType="VARCHAR" property="clModifyBy" />
    <result column="cl_sub_url" jdbcType="ARRAY" property="clSubUrl" typeHandler="com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler" />
    <result column="cl_icon_class" jdbcType="VARCHAR" property="clIconClass" />
    <result column="cl_order" jdbcType="SMALLINT" property="clOrder" />
    <result column="cl_is_menu" jdbcType="SMALLINT" property="clIsMenu" />
    <result column="cl_open_type" jdbcType="SMALLINT" property="clOpenType" />
    <result column="cl_height" jdbcType="INTEGER" property="clHeight" />
    <result column="cl_width" jdbcType="INTEGER" property="clWidth" />
    <result column="cl_is_report" jdbcType="SMALLINT" property="clIsReport" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.clSubUrlCriteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler} and #{criterion.secondValue,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
            <foreach collection="criteria.clSubUrlCriteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler} and #{criterion.secondValue,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    cl_id, cl_name, cl_type, cl_status, cl_blockup, cl_url, cl_is_base, cl_has_others, 
    cl_pid, cl_price, cl_grp_id, cl_hotel_id, cl_create_time, cl_create_by, cl_modify_time, 
    cl_modify_by, cl_sub_url, cl_icon_class, cl_order, cl_is_menu, cl_open_type, cl_height, 
    cl_width, cl_is_report
  </sql>
  <select id="selectByExample" parameterType="com.sstc.hmis.permission.dbaccess.data.PermsTPermissionExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from perms.perms_t_permission
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from perms.perms_t_permission
    where cl_id = #{clId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    delete from perms.perms_t_permission
    where cl_id = #{clId,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.sstc.hmis.permission.dbaccess.data.PermsTPermissionExample">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    delete from perms.perms_t_permission
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.sstc.hmis.permission.dbaccess.data.PermsTPermission">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    insert into perms.perms_t_permission (cl_id, cl_name, cl_type, 
      cl_status, cl_blockup, cl_url, 
      cl_is_base, cl_has_others, cl_pid, 
      cl_price, cl_grp_id, cl_hotel_id, 
      cl_create_time, cl_create_by, cl_modify_time, 
      cl_modify_by, cl_sub_url, 
      cl_icon_class, cl_order, cl_is_menu, 
      cl_open_type, cl_height, cl_width, 
      cl_is_report)
    values (#{clId,jdbcType=VARCHAR}, #{clName,jdbcType=VARCHAR}, #{clType,jdbcType=SMALLINT}, 
      #{clStatus,jdbcType=SMALLINT}, #{clBlockup,jdbcType=SMALLINT}, #{clUrl,jdbcType=VARCHAR}, 
      #{clIsBase,jdbcType=SMALLINT}, #{clHasOthers,jdbcType=SMALLINT}, #{clPid,jdbcType=VARCHAR}, 
      #{clPrice,jdbcType=NUMERIC}, #{clGrpId,jdbcType=VARCHAR}, #{clHotelId,jdbcType=VARCHAR}, 
      #{clCreateTime,jdbcType=TIMESTAMP}, #{clCreateBy,jdbcType=VARCHAR}, #{clModifyTime,jdbcType=TIMESTAMP}, 
      #{clModifyBy,jdbcType=VARCHAR}, #{clSubUrl,jdbcType=ARRAY,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler}, 
      #{clIconClass,jdbcType=VARCHAR}, #{clOrder,jdbcType=SMALLINT}, #{clIsMenu,jdbcType=SMALLINT}, 
      #{clOpenType,jdbcType=SMALLINT}, #{clHeight,jdbcType=INTEGER}, #{clWidth,jdbcType=INTEGER}, 
      #{clIsReport,jdbcType=SMALLINT})
  </insert>
  <insert id="insertSelective" parameterType="com.sstc.hmis.permission.dbaccess.data.PermsTPermission">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    insert into perms.perms_t_permission
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="clId != null">
        cl_id,
      </if>
      <if test="clName != null">
        cl_name,
      </if>
      <if test="clType != null">
        cl_type,
      </if>
      <if test="clStatus != null">
        cl_status,
      </if>
      <if test="clBlockup != null">
        cl_blockup,
      </if>
      <if test="clUrl != null">
        cl_url,
      </if>
      <if test="clIsBase != null">
        cl_is_base,
      </if>
      <if test="clHasOthers != null">
        cl_has_others,
      </if>
      <if test="clPid != null">
        cl_pid,
      </if>
      <if test="clPrice != null">
        cl_price,
      </if>
      <if test="clGrpId != null">
        cl_grp_id,
      </if>
      <if test="clHotelId != null">
        cl_hotel_id,
      </if>
      <if test="clCreateTime != null">
        cl_create_time,
      </if>
      <if test="clCreateBy != null">
        cl_create_by,
      </if>
      <if test="clModifyTime != null">
        cl_modify_time,
      </if>
      <if test="clModifyBy != null">
        cl_modify_by,
      </if>
      <if test="clSubUrl != null">
        cl_sub_url,
      </if>
      <if test="clIconClass != null">
        cl_icon_class,
      </if>
      <if test="clOrder != null">
        cl_order,
      </if>
      <if test="clIsMenu != null">
        cl_is_menu,
      </if>
      <if test="clOpenType != null">
        cl_open_type,
      </if>
      <if test="clHeight != null">
        cl_height,
      </if>
      <if test="clWidth != null">
        cl_width,
      </if>
      <if test="clIsReport != null">
        cl_is_report,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="clId != null">
        #{clId,jdbcType=VARCHAR},
      </if>
      <if test="clName != null">
        #{clName,jdbcType=VARCHAR},
      </if>
      <if test="clType != null">
        #{clType,jdbcType=SMALLINT},
      </if>
      <if test="clStatus != null">
        #{clStatus,jdbcType=SMALLINT},
      </if>
      <if test="clBlockup != null">
        #{clBlockup,jdbcType=SMALLINT},
      </if>
      <if test="clUrl != null">
        #{clUrl,jdbcType=VARCHAR},
      </if>
      <if test="clIsBase != null">
        #{clIsBase,jdbcType=SMALLINT},
      </if>
      <if test="clHasOthers != null">
        #{clHasOthers,jdbcType=SMALLINT},
      </if>
      <if test="clPid != null">
        #{clPid,jdbcType=VARCHAR},
      </if>
      <if test="clPrice != null">
        #{clPrice,jdbcType=NUMERIC},
      </if>
      <if test="clGrpId != null">
        #{clGrpId,jdbcType=VARCHAR},
      </if>
      <if test="clHotelId != null">
        #{clHotelId,jdbcType=VARCHAR},
      </if>
      <if test="clCreateTime != null">
        #{clCreateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="clCreateBy != null">
        #{clCreateBy,jdbcType=VARCHAR},
      </if>
      <if test="clModifyTime != null">
        #{clModifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="clModifyBy != null">
        #{clModifyBy,jdbcType=VARCHAR},
      </if>
      <if test="clSubUrl != null">
        #{clSubUrl,jdbcType=ARRAY,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler},
      </if>
      <if test="clIconClass != null">
        #{clIconClass,jdbcType=VARCHAR},
      </if>
      <if test="clOrder != null">
        #{clOrder,jdbcType=SMALLINT},
      </if>
      <if test="clIsMenu != null">
        #{clIsMenu,jdbcType=SMALLINT},
      </if>
      <if test="clOpenType != null">
        #{clOpenType,jdbcType=SMALLINT},
      </if>
      <if test="clHeight != null">
        #{clHeight,jdbcType=INTEGER},
      </if>
      <if test="clWidth != null">
        #{clWidth,jdbcType=INTEGER},
      </if>
      <if test="clIsReport != null">
        #{clIsReport,jdbcType=SMALLINT},
      </if>
    </trim>
  </insert>

  <update id="updateByExampleSelective" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    update perms.perms_t_permission
    <set>
      <if test="record.clId != null">
        cl_id = #{record.clId,jdbcType=VARCHAR},
      </if>
      <if test="record.clName != null">
        cl_name = #{record.clName,jdbcType=VARCHAR},
      </if>
      <if test="record.clType != null">
        cl_type = #{record.clType,jdbcType=SMALLINT},
      </if>
      <if test="record.clStatus != null">
        cl_status = #{record.clStatus,jdbcType=SMALLINT},
      </if>
      <if test="record.clBlockup != null">
        cl_blockup = #{record.clBlockup,jdbcType=SMALLINT},
      </if>
      <if test="record.clUrl != null">
        cl_url = #{record.clUrl,jdbcType=VARCHAR},
      </if>
      <if test="record.clIsBase != null">
        cl_is_base = #{record.clIsBase,jdbcType=SMALLINT},
      </if>
      <if test="record.clHasOthers != null">
        cl_has_others = #{record.clHasOthers,jdbcType=SMALLINT},
      </if>
      <if test="record.clPid != null">
        cl_pid = #{record.clPid,jdbcType=VARCHAR},
      </if>
      <if test="record.clPrice != null">
        cl_price = #{record.clPrice,jdbcType=NUMERIC},
      </if>
      <if test="record.clGrpId != null">
        cl_grp_id = #{record.clGrpId,jdbcType=VARCHAR},
      </if>
      <if test="record.clHotelId != null">
        cl_hotel_id = #{record.clHotelId,jdbcType=VARCHAR},
      </if>
      <if test="record.clCreateTime != null">
        cl_create_time = #{record.clCreateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.clCreateBy != null">
        cl_create_by = #{record.clCreateBy,jdbcType=VARCHAR},
      </if>
      <if test="record.clModifyTime != null">
        cl_modify_time = #{record.clModifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.clModifyBy != null">
        cl_modify_by = #{record.clModifyBy,jdbcType=VARCHAR},
      </if>
      <if test="record.clSubUrl != null">
        cl_sub_url = #{record.clSubUrl,jdbcType=ARRAY,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler},
      </if>
      <if test="record.clIconClass != null">
        cl_icon_class = #{record.clIconClass,jdbcType=VARCHAR},
      </if>
      <if test="record.clOrder != null">
        cl_order = #{record.clOrder,jdbcType=SMALLINT},
      </if>
      <if test="record.clIsMenu != null">
        cl_is_menu = #{record.clIsMenu,jdbcType=SMALLINT},
      </if>
      <if test="record.clOpenType != null">
        cl_open_type = #{record.clOpenType,jdbcType=SMALLINT},
      </if>
      <if test="record.clHeight != null">
        cl_height = #{record.clHeight,jdbcType=INTEGER},
      </if>
      <if test="record.clWidth != null">
        cl_width = #{record.clWidth,jdbcType=INTEGER},
      </if>
      <if test="record.clIsReport != null">
        cl_is_report = #{record.clIsReport,jdbcType=SMALLINT},
      </if>
    </set>
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    update perms.perms_t_permission
    set cl_id = #{record.clId,jdbcType=VARCHAR},
      cl_name = #{record.clName,jdbcType=VARCHAR},
      cl_type = #{record.clType,jdbcType=SMALLINT},
      cl_status = #{record.clStatus,jdbcType=SMALLINT},
      cl_blockup = #{record.clBlockup,jdbcType=SMALLINT},
      cl_url = #{record.clUrl,jdbcType=VARCHAR},
      cl_is_base = #{record.clIsBase,jdbcType=SMALLINT},
      cl_has_others = #{record.clHasOthers,jdbcType=SMALLINT},
      cl_pid = #{record.clPid,jdbcType=VARCHAR},
      cl_price = #{record.clPrice,jdbcType=NUMERIC},
      cl_grp_id = #{record.clGrpId,jdbcType=VARCHAR},
      cl_hotel_id = #{record.clHotelId,jdbcType=VARCHAR},
      cl_create_time = #{record.clCreateTime,jdbcType=TIMESTAMP},
      cl_create_by = #{record.clCreateBy,jdbcType=VARCHAR},
      cl_modify_time = #{record.clModifyTime,jdbcType=TIMESTAMP},
      cl_modify_by = #{record.clModifyBy,jdbcType=VARCHAR},
      cl_sub_url = #{record.clSubUrl,jdbcType=ARRAY,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler},
      cl_icon_class = #{record.clIconClass,jdbcType=VARCHAR},
      cl_order = #{record.clOrder,jdbcType=SMALLINT},
      cl_is_menu = #{record.clIsMenu,jdbcType=SMALLINT},
      cl_open_type = #{record.clOpenType,jdbcType=SMALLINT},
      cl_height = #{record.clHeight,jdbcType=INTEGER},
      cl_width = #{record.clWidth,jdbcType=INTEGER},
      cl_is_report = #{record.clIsReport,jdbcType=SMALLINT}
    <if test="_parameter != null">
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.sstc.hmis.permission.dbaccess.data.PermsTPermission">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    update perms.perms_t_permission
    <set>
      <if test="clName != null">
        cl_name = #{clName,jdbcType=VARCHAR},
      </if>
      <if test="clType != null">
        cl_type = #{clType,jdbcType=SMALLINT},
      </if>
      <if test="clStatus != null">
        cl_status = #{clStatus,jdbcType=SMALLINT},
      </if>
      <if test="clBlockup != null">
        cl_blockup = #{clBlockup,jdbcType=SMALLINT},
      </if>
      <if test="clUrl != null">
        cl_url = #{clUrl,jdbcType=VARCHAR},
      </if>
      <if test="clIsBase != null">
        cl_is_base = #{clIsBase,jdbcType=SMALLINT},
      </if>
      <if test="clHasOthers != null">
        cl_has_others = #{clHasOthers,jdbcType=SMALLINT},
      </if>
      <if test="clPid != null">
        cl_pid = #{clPid,jdbcType=VARCHAR},
      </if>
      <if test="clPrice != null">
        cl_price = #{clPrice,jdbcType=NUMERIC},
      </if>
      <if test="clGrpId != null">
        cl_grp_id = #{clGrpId,jdbcType=VARCHAR},
      </if>
      <if test="clHotelId != null">
        cl_hotel_id = #{clHotelId,jdbcType=VARCHAR},
      </if>
      <if test="clCreateTime != null">
        cl_create_time = #{clCreateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="clCreateBy != null">
        cl_create_by = #{clCreateBy,jdbcType=VARCHAR},
      </if>
      <if test="clModifyTime != null">
        cl_modify_time = #{clModifyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="clModifyBy != null">
        cl_modify_by = #{clModifyBy,jdbcType=VARCHAR},
      </if>
      <if test="clSubUrl != null">
        cl_sub_url = #{clSubUrl,jdbcType=ARRAY,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler},
      </if>
      <if test="clIconClass != null">
        cl_icon_class = #{clIconClass,jdbcType=VARCHAR},
      </if>
      <if test="clOrder != null">
        cl_order = #{clOrder,jdbcType=SMALLINT},
      </if>
      <if test="clIsMenu != null">
        cl_is_menu = #{clIsMenu,jdbcType=SMALLINT},
      </if>
      <if test="clOpenType != null">
        cl_open_type = #{clOpenType,jdbcType=SMALLINT},
      </if>
      <if test="clHeight != null">
        cl_height = #{clHeight,jdbcType=INTEGER},
      </if>
      <if test="clWidth != null">
        cl_width = #{clWidth,jdbcType=INTEGER},
      </if>
      <if test="clIsReport != null">
        cl_is_report = #{clIsReport,jdbcType=SMALLINT},
      </if>
    </set>
    where cl_id = #{clId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.sstc.hmis.permission.dbaccess.data.PermsTPermission">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    update perms.perms_t_permission
    set cl_name = #{clName,jdbcType=VARCHAR},
      cl_type = #{clType,jdbcType=SMALLINT},
      cl_status = #{clStatus,jdbcType=SMALLINT},
      cl_blockup = #{clBlockup,jdbcType=SMALLINT},
      cl_url = #{clUrl,jdbcType=VARCHAR},
      cl_is_base = #{clIsBase,jdbcType=SMALLINT},
      cl_has_others = #{clHasOthers,jdbcType=SMALLINT},
      cl_pid = #{clPid,jdbcType=VARCHAR},
      cl_price = #{clPrice,jdbcType=NUMERIC},
      cl_grp_id = #{clGrpId,jdbcType=VARCHAR},
      cl_hotel_id = #{clHotelId,jdbcType=VARCHAR},
      cl_create_time = #{clCreateTime,jdbcType=TIMESTAMP},
      cl_create_by = #{clCreateBy,jdbcType=VARCHAR},
      cl_modify_time = #{clModifyTime,jdbcType=TIMESTAMP},
      cl_modify_by = #{clModifyBy,jdbcType=VARCHAR},
      cl_sub_url = #{clSubUrl,jdbcType=ARRAY,typeHandler=com.sstc.hmis.dbaccess.mybatis.ArrayTypeHandler},
      cl_icon_class = #{clIconClass,jdbcType=VARCHAR},
      cl_order = #{clOrder,jdbcType=SMALLINT},
      cl_is_menu = #{clIsMenu,jdbcType=SMALLINT},
      cl_open_type = #{clOpenType,jdbcType=SMALLINT},
      cl_height = #{clHeight,jdbcType=INTEGER},
      cl_width = #{clWidth,jdbcType=INTEGER},
      cl_is_report = #{clIsReport,jdbcType=SMALLINT}
    where cl_id = #{clId,jdbcType=VARCHAR}
  </update>
  <select id="countByExample" parameterType="com.sstc.hmis.permission.dbaccess.data.PermsTPermissionExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Aug 22 13:54:29 CST 2017.
    -->
    select count(*) from perms.perms_t_permission
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  

   <select id="findPermissionByStaffId" parameterType="com.sstc.hmis.permission.dbaccess.data.PermsTStaffRole" resultType="com.sstc.hmis.permission.dbaccess.data.PermsTPermission">
		with RECURSIVE cre AS (
		 select * from perms.perms_t_permission t1  
		 <where>
			 <if test="clStaffId != null">
				 t1.cl_id in (
					SELECT
						DISTINCT T3.cl_id FROM
							perms.perms_t_staff_role T1
						LEFT JOIN perms.perms_t_role_permission T2 ON T1.cl_role_id = T2.cl_role_id
						LEFT JOIN perms.perms_t_permission T3 ON T2.cl_permission_id = T3.cl_id
						AND T1.CL_STAFF_ID = #{clStaffId}
						AND T1.cl_status = 0
						AND T2.cl_status = 0
						AND T3.cl_status = 0
				)
			 </if>
			 <if test="clRoleId != null">
			  and t1.cl_id in (
			 	SELECT T1.cl_permission_id FROM perms.perms_t_role_permission T1 WHERE T1.cl_role_id = #{clRoleId}
			 	)  
			 </if>
			 and t1.cl_status = 0
		 </where>
		   UNION ALL
		 select t2.* from perms.perms_t_permission t2, cre t3 where t3.cl_pid = t2.cl_id and t2.cl_status = 0
		) select DISTINCT * from cre where cl_status= 0 ORDER by cl_type asc
   </select>
   <select id="findAllPerms" resultType="com.sstc.hmis.permission.dbaccess.data.PermsTPermission">
		with RECURSIVE cre AS (
		 select * from perms.perms_t_permission t1  where t1.cl_status = 0 and t1.cl_type = 0
		   UNION ALL
		 select t2.* from perms.perms_t_permission t2 inner join cre t3 on t3.cl_id = t2.cl_pid and t2.cl_status = 0
		) select DISTINCT * from cre where cl_status= 0 ORDER by cl_type asc
   </select>
  
  <select id="loadcheckedPermissionList" parameterType="java.lang.String" resultType="com.sstc.hmis.permission.dbaccess.data.PermsTPermission">
 WITH RECURSIVE CRE AS (
	SELECT
		T1.cl_pid,
		T1.cl_type,
		T1.CL_ID,
		T1.cl_name
	FROM
		perms.perms_t_permission T1
	WHERE
		T1.cl_type = 0 and t1.cl_status = 0
	UNION ALL
		SELECT
			T2.CL_PID,
			t2.cl_type,
			T2.CL_ID,
			CAST (
				T3.cl_name || '&gt;' || T2.cl_name AS VARCHAR (256)
			) AS CL_NAME
		FROM
			perms.perms_t_permission T2
		INNER JOIN CRE T3 ON T2.CL_PID = T3.CL_ID and T2.cl_status = 0
) SELECT
	*
FROM
	CRE
WHERE
	cl_id IN (
	SELECT
		cl_permission_id
	FROM
		perms.perms_t_role_permission
	WHERE
		cl_role_id = #{clRoleId} and cl_status = 0
) and cl_id not in (select cl_pid from perms.perms_t_permission where cl_pid is not null)
		
  </select>
  
  <resultMap id="permResultMap" type="com.sstc.hmis.model.tree.TreeNode">
  	<result column="text" property="text" />
  	<result column="id" property="id" />
  	<result column="pid" property="parentId" />
  	<result column="type" property="nodeType" />
  	<collection column="id" ofType="com.sstc.hmis.model.tree.TreeNode" property="children" select="selectSubPermTree">
  	</collection>
  </resultMap>
	  
  <select id="selectPermTree" resultMap="permResultMap">
  	SELECT CL_NAME AS TEXT,CL_ID AS ID ,CL_PID AS PID ,CL_TYPE AS TYPE FROM PERMS.PERMS_T_PERMISSION
  	WHERE CL_TYPE = ${@com.sstc.hmis.model.constants.Constants@PERMS_PRODUCTION} 
  	AND CL_STATUS != ${@com.sstc.hmis.model.constants.Constants@STATUS_DEL}
  </select>
  <select id="selectSubPermTree" parameterType="java.lang.String" resultMap="permResultMap">
  	SELECT CL_NAME AS TEXT,CL_ID AS ID ,CL_PID AS PID ,CL_TYPE AS TYPE FROM PERMS.PERMS_T_PERMISSION
  	WHERE CL_STATUS != ${@com.sstc.hmis.model.constants.Constants@STATUS_DEL} AND CL_PID = #{id}
  </select>
  
  <resultMap id="ExtendResultMap" type="com.sstc.hmis.permission.dbaccess.data.domain.PermsTPermissionVo">
      	<id column="cl_id" jdbcType="VARCHAR" property="clId" />
	    <result column="cl_name" jdbcType="VARCHAR" property="clName" />
	    <result column="cl_type" jdbcType="SMALLINT" property="clType" />
	    <result column="cl_status" jdbcType="SMALLINT" property="clStatus" />
	    <result column="cl_blockup" jdbcType="SMALLINT" property="clBlockup" />
	    <result column="cl_url" jdbcType="VARCHAR" property="clUrl" />
	    <result column="cl_is_base" jdbcType="SMALLINT" property="clIsBase" />
	    <result column="cl_has_others" jdbcType="SMALLINT" property="clHasOthers" />
	    <result column="cl_pid" jdbcType="VARCHAR" property="clPid" />
	    <result column="cl_price" jdbcType="NUMERIC" property="clPrice" />
	    <result column="cl_grp_id" jdbcType="VARCHAR" property="clGrpId" />
	    <result column="cl_hotel_id" jdbcType="VARCHAR" property="clHotelId" />
	    <result column="cl_create_time" jdbcType="TIMESTAMP" property="clCreateTime" />
	    <result column="cl_create_by" jdbcType="VARCHAR" property="clCreateBy" />
	    <result column="cl_modify_time" jdbcType="TIMESTAMP" property="clModifyTime" />
	    <result column="cl_modify_by" jdbcType="VARCHAR" property="clModifyBy" />
	  	<result column="cl_perm_path" property="clPermPath" />
  </resultMap>
  
  <select id="pageList" parameterType="com.sstc.hmis.permission.dbaccess.data.PermsTPermission" resultMap="ExtendResultMap">
		WITH RECURSIVE CRE AS (
			SELECT cl_name AS cl_perm_path,* FROM perms.perms_t_permission T1 
			<where>
				<choose>
					<when test="clPid != null and clPid != ''">
						T1.CL_ID = #{clPid}
					</when>
					<otherwise>
						T1.CL_TYPE = ${@com.sstc.hmis.model.constants.Constants@PERMS_PRODUCTION}
					</otherwise>
				</choose>
			</where>
				UNION ALL
		  SELECT CAST(T3.cl_perm_path || ' &gt; ' || T2.CL_NAME AS VARCHAR(256)) AS cl_perm_path,T2.* FROM perms.perms_t_permission T2 INNER JOIN CRE T3 ON T2.CL_PID = T3.CL_ID
		) SELECT * FROM CRE T1 <include refid="baseSelectCondition" /> ORDER BY T1.CL_TYPE ASC,T1.CL_ORDER ASC
  </select>
  
  
  <sql id="baseSelectCondition">
  	<where>
  		<if test="clId != null">
	        and T1.cl_id = #{clId,jdbcType=VARCHAR}
	      </if>
	      <if test="clName != null">
	        and T1.cl_name ILIKE CONCAT('%',#{clName,jdbcType=VARCHAR},'%')
	      </if>
	      <if test="clType != null">
	        and T1.cl_type = #{clType,jdbcType=SMALLINT}
	      </if>
	      <choose>
		      <when test="clStatus != null">
		        and T1.cl_status = #{clStatus,jdbcType=SMALLINT}
		      </when>
	      	  <otherwise>
	      	  	and T1.cl_status != ${@com.sstc.hmis.model.constants.Constants@STATUS_DEL}
	      	  </otherwise>
	      </choose>
	      <if test="clBlockup != null">
	        and T1.cl_blockup = #{clBlockup,jdbcType=SMALLINT}
	      </if>
	      <if test="clUrl != null">
	        and T1.cl_url = #{clUrl,jdbcType=VARCHAR}
	      </if>
	      <if test="clIsBase != null">
	        and T1.cl_is_base = #{clIsBase,jdbcType=SMALLINT}
	      </if>
	      <if test="clHasOthers != null">
	        and T1.cl_has_others = #{clHasOthers,jdbcType=SMALLINT}
	      </if>
	      <if test="clPrice != null">
	        and T1.cl_price = #{clPrice,jdbcType=NUMERIC}
	      </if>
	      <if test="clGrpId != null">
	        and T1.cl_grp_id = #{clGrpId,jdbcType=VARCHAR}
	      </if>
	      <if test="clHotelId != null">
	        and T1.cl_hotel_id = #{clHotelId,jdbcType=VARCHAR}
	      </if>
  	</where>
  </sql>
  
  
  <select id="selectAllPermsByRoleIds" parameterType="java.util.Map" resultMap="BaseResultMap">
  	WITH RECURSIVE CRE AS (
		SELECT T3.* FROM perms.perms_t_permission T3 
		INNER JOIN perms.perms_t_role_permission T1 ON T1.cl_permission_id = T3.cl_id
		WHERE T1.cl_status = ${@com.sstc.hmis.model.constants.Constants@STATUS_NORMAL}
		AND T1.cl_role_id IN 
		<foreach close=")" collection="roleIds" item="roleId" open="(" separator=",">
			#{roleId}
		</foreach>	
	UNION ALL
		SELECT T4.* FROM perms.perms_t_permission T4 INNER JOIN CRE T5 ON T4.cl_id = T5.CL_PID
	) SELECT DISTINCT * FROM CRE where cl_status = ${@com.sstc.hmis.model.constants.Constants@STATUS_NORMAL}
	ORDER BY CL_TYPE ASC ,CL_ORDER ASC
  </select>
  
  <select id="listUserMenu" parameterType="java.util.Map" resultMap="BaseResultMap">
  	WITH RECURSIVE cre as (
		SELECT t4.cl_id,t4.cl_name,t4.cl_type,t4.cl_url,t4.cl_pid,t4.cl_icon_class,t4.cl_is_menu,t4.cl_order FROM perms.perms_t_role_permission t1 
		INNER JOIN perms.perms_t_staff_role t2 on t1.cl_role_id = t2.cl_role_id
		INNER JOIN perms.perms_t_permission t4 on t1.cl_permission_id = t4.cl_id
		WHERE t4.cl_status = ${@com.sstc.hmis.model.constants.Constants@STATUS_NORMAL}
		and t1.cl_status = ${@com.sstc.hmis.model.constants.Constants@STATUS_NORMAL}
		and t2.cl_status = ${@com.sstc.hmis.model.constants.Constants@STATUS_NORMAL}
		AND t2.cl_staff_id = #{staffId,jdbcType=VARCHAR} 
		AND t2.cl_hotel_id = #{hotelId,jdbcType=VARCHAR} 
		UNION 
		SELECT t5.cl_id,t5.cl_name,t5.cl_type,t5.cl_url,t5.cl_pid,t5.cl_icon_class,t5.cl_is_menu,t5.cl_order
		FROM perms.perms_t_permission t5 INNER JOIN cre t6 on t5.cl_id = t6.cl_pid 
		WHERE t5.cl_status = ${@com.sstc.hmis.model.constants.Constants@STATUS_NORMAL}
	) SELECT * from cre WHERE CL_IS_MENU = ${@com.sstc.hmis.model.constants.Constants@IS_MENU_YES} AND 
	<!-- 菜单只展示系统、模块和功能数据 -->
	 cl_type BETWEEN ${@com.sstc.hmis.model.constants.Constants@PERMS_SYSTEM} 
	 AND ${@com.sstc.hmis.model.constants.Constants@PERMS_FUNCTION}
	ORDER BY cl_type ASC,cl_order ASC
  </select>
  
  <resultMap type="com.sstc.hmis.permission.dbaccess.data.domain.PermParent" id="permParentResultMap">
  	<result column="parent_id" property="parentId"/>
  	<result column="perm_id" property="permId"/>
  	<result column="sys_id" property="systemId"/>
  </resultMap>
  
  <select id="selectPermSystemId" resultMap="permParentResultMap">
  	WITH RECURSIVE cre as (
		SELECT t1.cl_id,t1.cl_pid,t1.cl_id as sys_id FROM perms.perms_t_permission t1 WHERE t1.cl_type = 1 
		UNION
		SELECT t2.cl_id,t2.cl_pid,t3.sys_id  from perms.perms_t_permission t2 INNER JOIN cre t3 on t2.cl_pid = t3.cl_id 
		WHERE t2.cl_type BETWEEN 2 and 3 
	) SELECT cl_id as perm_id ,cl_pid as parent_id, sys_id  FROM cre 
	<where>
		<if test="idList != null">
			cl_id in 
			<foreach collection="idList" open="(" close=")" item="permId" separator=",">
			 #{permId}
			</foreach>
		</if>
	</where>
  </select>
  
  <select id="getSystemPermissionById" resultMap="BaseResultMap">
  	WITH RECURSIVE CRE  AS(
		SELECT * FROM perms.perms_t_permission WHERE cl_id = #{permId}
		UNION 
		SELECT T1.* FROM perms.perms_t_permission T1 INNER JOIN CRE T2 ON T1.cl_id = T2.CL_PID
	) SELECT * FROM CRE WHERE cl_type = 1 OR cl_id = #{permId}
  </select>
  
  
</mapper>